<div>
  <div [formGroup]="generalInfoFormLocalModel">
    <div class="row">
      <div class="form-group col-xs-4 minWidth200" >
        <label for="formStatus">
          <span class="field-name">{{'appl.status' |translate}}</span>
          <input name="formStatus" id="formStatus" class="form-control full-width" [readonly]="true"
                 [formControl]="generalInfoFormLocalModel.controls['formStatus'] | formControl" (blur)="onblur()" />
        </label>
      </div>
      <div class="form-group col-xs-4 minWidth200" >
        <label for="lastSavedDate">
          <span class="field-name">{{'date.saved' |translate}}</span>
          <input name="lastSavedDate" id="lastSavedDate" class="form-control full-width" [readonly]="!isInternal"
                 [formControl]="generalInfoFormLocalModel.controls['lastSavedDate'] | formControl" (blur)="onblur()" />
        </label>
      </div>
      <div class="form-group col-xs-4 minWidth200">
        <label for="companyId" [ngClass]="{'required':isInternal}" aria-required="true">
          <span class="field-name" >{{'company.id' |translate}}</span>
          <strong class="required" *ngIf="isInternal" >{{'commmon.required.bracket'|translate}}</strong>
          <control-messages *ngIf="(isInternal && generalInfoFormLocalModel.controls['companyId'].invalid)"
                            [showError]="showFieldErrors"
                            [control]="generalInfoFormLocalModel.controls['companyId'] | formControl"
                            controlId="companyId" label="company.id" parentId="generalInfo"
                            parentLabel="Regulatory Company Enrolment"></control-messages>
          <input name="companyId" id="companyId" class="form-control" [formControl]="generalInfoFormLocalModel.controls['companyId'] | formControl"
                 [readonly]="!isInternal" maxlength="6" (blur)="onblur()" />
        </label>
      </div>
    </div>
    <div class="row">
      <div class="form-group col-xs-2" >
        <button class="btn btn-primary" (click)="setAmendState()"  
                [disabled]="disableAmendButton" id="amendSubDisabled">
          {{'amend.enrol'|translate}}</button>
      </div>
    </div>

    <!-- <div class="row" >
      <div class="form-group col-lg-12 col-md-12 col-sm-12 col-xs-12">
        11111
    <label formArrayName="orders" *ngFor="let order of amendReasonArray.controls; let i = index">
      <input type="checkbox" [formControlName]="i"> 
      {{amendReasonList[i].label}} 
    </label>
    </div>
    </div> -->

    <div class="row" ><!-- *ngIf="isAmend" -->
      <div class="form-group col-lg-12 col-md-12 col-sm-12 col-xs-12">
        22222
    <label formArrayName="amendReasons" *ngFor="let order of amendReasonArray.controls; let i = index">
      <input type="checkbox" [formControl]="order | formControl" (change)="onAmendReasonChange()"> 
      {{amendReasonList[i].label}} 
    </label>
    </div>
    </div>
    <!-- <pre>{{ selectedAmendReasons | json }}</pre> -->

    <div class="row" ><!-- *ngIf="isAmend" -->
      <div class="form-group col-lg-12 col-md-12 col-sm-12 col-xs-12">
        <fieldset id="amendReasons" class="chkbxrdio-grp">
          <legend class="required">
            <span>{{'amend.reason' | translate}}</span>
            <strong class="required" >{{'commmon.required.bracket'|translate}}</strong>
            this is a hidden field <input name="amendReason" id="amendReason" type="text" class="form-control"
                  [formControl]="generalInfoFormLocalModel.controls['amendReason'] | formControl"/>
          </legend>

              <div class="checkbox">
                <label for="nameChange">
                  <input name="nameChange" type="checkbox" (click)="nameChangeOnblur()"
                        [formControl]="generalInfoFormLocalModel.controls['nameChange'] | formControl"
                        id="nameChange"/>
                  <span>{{'manuname.change'|translate}}</span>
                </label>
              </div>

              <div class="checkbox">
                <label for="addressChange">
                  <input name="addressChange" type="checkbox" (click)="addressChangeOnblur()"
                        [formControl]="generalInfoFormLocalModel.controls['addressChange'] | formControl" 
                        id="addressChange"/>
                  <span>{{'manuaddr.change'|translate}}</span>
                </label>
              </div>

              <div class="checkbox">
                <label for="facilityChange">
                  <input name="facilityChange" type="checkbox" (click)="facilityChangeOnblur()"
                        [formControl]="generalInfoFormLocalModel.controls['facilityChange'] | formControl"
                        id="facilityChange"/>
                  <span>{{'facility.change'|translate}}</span>
                </label>
              </div>

              <div class="checkbox">
                <label for="contactChange">
                  <input name="contactChange" type="checkbox"
                        [formControl]="generalInfoFormLocalModel.controls['contactChange'] | formControl"
                        id="contactChange"/>
                  <span>{{'contact.change'|translate}}</span>
                </label>
              </div>

              <div class="checkbox">
                <label for="otherChange">
                  <input name="otherChange" type="checkbox" (click)="amendReasonOnblur()"
                        [formControl]="generalInfoFormLocalModel.controls['otherChange'] | formControl"
                        id="otherChange"/>
                  <span>{{'other'|translate}}</span>
                </label>
              </div>
          
          <div class="row">
            <div *ngIf="isOther()" class="col-xs-12 form-group">
              <label for="otherDetails" class="required full-width">{{'other.details'|translate}}
                <strong class="required" >{{'commmon.required.bracket'|translate}}</strong>
                <control-messages *ngIf="generalInfoFormLocalModel.controls['otherDetails'].invalid"
                                  [showError]="showFieldErrors"
                                  [control]="generalInfoFormLocalModel.controls['otherDetails'] | formControl"
                                  controlId="otherDetails" label="other.details"
                                  parentId="generalInfo"
                                  parentLabel="Regulatory Company Enrolment"></control-messages>
              <textarea type="text" class="form-control full-width" id="otherDetails" (blur)="amendReasonOnblur()"
                        [formControl]="generalInfoFormLocalModel.controls['otherDetails'] | formControl" maxlength="500"></textarea>
              </label>
            </div>
          </div>
        </fieldset>
      </div>
    </div>

    <div class="row">
      <div class="form-group col-xs-6 rep-margin-top-12" >
        <label for="areLicensesTransfered" class="required full-width">
          <span class="field-name" >{{'ownership.transferred' |translate}}</span>
          <strong class="required" >{{'commmon.required.bracket'|translate}}</strong>
          <control-messages *ngIf="generalInfoFormLocalModel.controls['areLicensesTransfered'].invalid"
                            [showError]="showFieldErrors"
                            [control]="generalInfoFormLocalModel.controls['areLicensesTransfered'] | formControl"
                            controlId="areLicensesTransfered" label="ownership.transferred"
                            parentId="generalInfo"
                            parentLabel="Regulatory Company Enrolment"></control-messages>
          <select id="areLicensesTransfered" required class="form-control full-width" (change)="onblur()"
            (blur)="amendReasonOnblur()"
                  (selected)="amendReasonOnblur()" [formControl]="generalInfoFormLocalModel.controls['areLicensesTransfered'] | formControl">
                  <!-- ling todo select doesn't trigger the blur/selected event, leave it for now, correct when understanding the logic -->
            <option label=" " value=""></option>
            <option *ngFor="let yesno of yesNoList" [ngValue]="yesno.id"> {{ yesno | textTransform: lang }}</option>
          </select>
        </label>
      </div>
    </div>
    <pre>{{generalInfoFormLocalModel.value |json}}</pre>
      <!-- <pre>companyId.invalid={{generalInfoFormLocalModel.controls.companyId.invalid}}</pre> -->
  </div>
</div>
